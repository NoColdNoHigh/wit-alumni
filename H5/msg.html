<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no, target-densitydpi=device-dpi">
    <meta name="keywords" content="校友录，校友会,手机校友录，慧脑校友录">
    <meta name="description" content="慧脑校友录,手机校友录，校友会">
    <link rel="stylesheet" type="text/css" href="../css/alumni.css">
    <link rel="stylesheet" type="text/css" href="../css/witcs.css">
    <script src="../js/witjs.js"></script>
    <title>校友录</title>
</head>
<body class="ofa" onload="loadend()" onresize="autocss()">
<div id="s_select" class="none index999 fix bottom0 W11 CH callnone"></div>
<div id="re_page" class="none index99 fix bottom0 W11 CH callnone"></div>
<div id="myDetails" class="W11  bgc9 ">

    <div class="index9 fix top0 H W11 AC ffHT  bgc9">个人信息
        <img src='../images/icon/back_b.png' class="FL P1M B4M H4M" onclick="location.href='index.html'"/>
        <div class="B4M H4M FR  P05M"></div>
    </div>
    <div class=" W11 MTH PL1M PR1M bgc10  bordBDe6">
        <div class="H6M flexbox" onclick="updateMsg(this,'img')">
            <div class="W21 FL AL">头像</div>
            <div class="W21 FR  flexbox">
                <div class="W11 AR H6M">
                    <img src="../images/pic1.png" class="H6M B6M P05M rad1 AR" alt="" id="myImg">
                </div>
                <div class=" AR color8">
                    <div class=" AR">&#62</div>
                </div>
            </div>
        </div>
    </div>

    <div class="H1M W11 bgcaf5 bordBDe6"></div>
    <div class=" W11  PL1M PR1M bgc10  bordBDe6">
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">名字</div>
            <div id="myname" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'sex')">
            <div class="W21 FL AL">性别</div>
            <div id="mysex" class="W21 FR AR color8 ellips">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="  H4M flexbox" onclick="updateMsg(this,'date')">
            <div class="W21 FL AL">生日</div>
            <div id="mybirthday" class="W21 FR AR color8 ellips">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
    </div>
    <div class="H1M W11 bgcaf5 bordBDe6"></div>
    <div class=" W11  PL1M PR1M bgc10  bordBDe6">
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">邮箱</div>
            <div id="mymail" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">QQ</div>
            <div id="myqq" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">微信</div>
            <div id="mywx" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
    </div>
    <div class="H1M W11 bordBDe6"></div>
    <div class=" W11  PL1M PR1M bgc10  bordBDe6 ellips">
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'addr')">
            <div class="W21 FL AL">地址</div>
            <div id="myaddr" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">邮编</div>
            <div id="myzcode" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
    </div>
    <div class="H1M W11 bordBDe6"></div>
    <div class=" W11  PL1M PR1M bgc10  bordBDe6">
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'edu')">
            <div class="W21 FL AL">学历</div>
            <div id="myeducation" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">毕业院校</div>
            <div id="mygraduation" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
    </div>
    <div class="H1M W11 bordBDe6"></div>
    <div class=" W11  PL1M PR1M bgc10  bordBDe6">
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'ind')">
            <div class="W21 FL AL">行业</div>
            <div id="myindustry" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">单位</div>
            <div id="mycomp" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>

        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'dept')">
            <div class="W21 FL AL">部门</div>
            <div id="mydept" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'job')">
            <div class="W21 FL AL">职务</div>
            <div id="myjob" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'car')">
            <div class="W21 FL AL">职称</div>
            <div id="mycareer" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
        <div class="bordBDe6  H4M flexbox" onclick="updateMsg(this,'txt')">
            <div class="W21 FL AL">荣誉</div>
            <div id="myhonor" class="W21 FR AR color8 ellips" data-t="my_msg">
            </div>
            <div class="ML AR color8">
                <div class=" AR">&#62</div>
            </div>
        </div>
    </div>
    <div class="MTH H1M W11 bordBDe6"></div>
    <!--<div class=" W11    bgc119  bordBDe6">-->
        <!--<details open>-->
            <!--<summary class="FL AL W11 P1M bordBD1 ">已加班级</summary>-->
            <!--<div id="myAllClass"></div>-->
        <!--</details>-->
        <!--<div class="clear"></div>-->
    <!--</div>-->

</div>
</body>
</html>
<script src="../js/wit_ajax.js"></script>
<script src="../js/witconfig.js"></script>
<script src="../js/witjsdate.js"></script>
<script src="../js/witjsaddr.js"></script>
<script src="../js/wit_app.js"></script>
<script type="text/javascript">
    "use strict";
    autocss();
    var _userguid = "10086", _token = "a7ed951bc954130d23c318ed4136cb61";
    const _url = "http://121.43.233.185/alumnicloudweb";
    getClassMsg();

    function loadend() {
        autocss();
        loadimg();
        _wit.postmessage({functionname: "getuser", callback: "callback"});
    }

    function callback(msg) {
        console.log(msg);
        var info = msg.perinfo;
        //获取班级信息
        var myclass = info.perexpeducationjson;
        console.log(myclass);
        C_mydetails(myclass);
        _wit.postmessage({functionname: 'getuserinfo', callback: 'init'});
    }

    function getClassMsg() {
        var para = {
            token: _token,
            userguid: _userguid,
            phone: "15158677106",
            page: 1,
            pagesize: 1
        };
        _wd.ajax_formdata(_url + "/member/queryByGuid.do", true, para, function (msg) {
            var p = JSON.parse(msg).message[0];
            console.log(p);
            var pd = document.getElementById("myDetails").querySelectorAll("[data-t='my_msg']");
            console.log(pd);
            var mysex = document.getElementById("mysex");
            var sex;
            switch (p.sex) {
                case 0:
                    sex = " ";
                    break;
                case 1:
                    sex = " 男";
                    break;
                case 2:
                    sex = "女";
                    break;
            }
            mysex.innerText = sex;
            var mybirthday = document.getElementById("mybirthday");
            mybirthday.innerText = _wd.crtTimeYMD(p.birthday);
            Array.prototype.forEach.call(pd, function (v) {
                for (var i in p) {
                    if (i === v.id.split("my")[1]) {
                        v.innerText = p[i];
                    }
                }
            });

            // p.forEach(function (v) {
                // var myImg = document.getElementById("myImg");
                // myImg.src = "";
                // var myName = document.getElementById("myName");
                // myName.innerText = v.name;
                // var mySex = document.getElementById("mySex");
                // var sex;
                // switch (v.sex) {
                //     case 0:
                //         sex = " ";
                //         break;
                //     case 1:
                //         sex = " 男";
                //         break;
                //     case 2:
                //         sex = "女";
                //         break;
                // }
                // mySex.innerText = sex;
                // var mybirth = document.getElementById("mybirth");
                // mybirth.innerText = _wd.crtTimeYMD(v.birthday);
                //
                // var myMail = document.getElementById("myMail");
                // myMail.innerText = v.mail;
                //
                // var myQQ = document.getElementById("myQQ");
                // myQQ.innerText = v.qq;
                //
                // var myWX = document.getElementById("myWX");
                // myWX.innerText = v.wx;
                //
                // var myAddr = document.getElementById("myAddr");
                // myAddr.innerText = v.addr;
                //
                // var myZcode = document.getElementById("myZcode");
                // myZcode.innerText = v.zcode;
                //
                // var myEdu = document.getElementById("myEdu");
                // myEdu.innerText = v.education;
                //
                // var myGraduation = document.getElementById("myGraduation");
                // myGraduation.innerText = v.graduation;
                //
                // var myIndustry = document.getElementById("myIndustry");
                // myIndustry.innerText = v.industry;
                //
                // var myComp = document.getElementById("myComp");
                // myComp.innerText = v.comp;
                //
                // var myCareer = document.getElementById("myCareer");
                // myCareer.innerText = v.career;
                //
                // var myDept = document.getElementById("myDept");
                // myDept.innerText = v.dept;
                //
                // var myJob = document.getElementById("myJob");
                // myJob.innerText = v.job;
                //
                // var myHonor = document.getElementById("myHonor");
                // myHonor.innerText = v.honor;


            // })

        });
    }

    function updateMsg(p, t) {
        var title = p.children[0].innerText;
        var cont = p.children[1].innerText;
        var id = p.children[1].id.substring(2, p.children[1].id.length);
        console.log(id);
        var inHtml = "";
        switch (t) {
            case "txt":
                inHtml = '<input type="text" class="FL W11 H4M  F3 ALP bord0  " id="per_' + id + '" placeholder="' + cont + '" value="' + cont + '"/>';
                break;
            case "sex":
                inHtml = '<div id="per_sex" class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" title="-1" data-t="radio" data-s="男,女" />' + cont + '</div>';
                break;
            case "date":
                inHtml = '<div  data-in="title" id="per_birthday" class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" onclick="wit_date.init(this,0, \'012\',\'年月日\');">' + cont + '</div>'
                break;
            case "addr":
                inHtml = '<div id="per_address0"   data-in="title" class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" onclick="creat_addr(4,0)">请选择所在区域</div>\n' +
                    '<input id="per_address1" data-id="addr" class="FL W11 H4M  F3 ALP bord0 " data-t="clear" placeholder="请输入详细地址"/>';
                break;
            case "edu":
                cont = cont.length > 0 ? cont : "请选择最高学历";
                inHtml = '    <div id="per_education"  class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" data-t="check" placeholder="请选择最高学历"' +
                    '             data-s="无,小学,初中,高中,中专,大专,本科,学士,硕士,博士">' + cont +
                    '        </div>';
                break;
            case "ind":
                cont = cont.length > 0 ? cont : "请选择行业";
                inHtml = '  <div id="per_industry" class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" data-t="check" placeholder="请选择行业"' +
                    '             data-s="其它, 公务, 教育, 医疗, 科研设计, 农业, 食品, 纺织服饰, 轻工, 能源矿材, 化工, 五金机电, 仪器仪表, 家电, 设备制造, 建筑房产, 交通工业, 物流服务, 信息产业, 商贸, 金融, 商务服务, 居民服务, 环境管理, 文化娱乐, 餐住旅游">' + cont +
                    '        </div>';
                break;
            case "dept":
                cont = cont.length > 0 ? cont : "请选择部门";
                inHtml = ' <div id="per_dept" class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" data-t="check" placeholder="请选择部门"' +
                    '             data-s="生产部,销售部,财务部,技术部,品质部,采购部,行政部,人事部,物流部,企划部,外贸部,市场部,设备部,总经办">' + cont +
                    '        </div> ';
                break;
            case "job":
                cont = cont.length > 0 ? cont : "请选择职务";
                inHtml = '<div id="per_position"  class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" data-t="check" placeholder="请选择职务"' +
                    '             data-s="董事长,总经理,经理,主任,部长,局长,处长,科长,队长,组长,助理,科员,办事员,院长,书记,主席,总监,监理,总编,主编,主治">' + cont +
                    '        </div> ';
                break;
            case "car":
                cont = cont.length > 0 ? cont : "请选择职称";
                inHtml = '<div id="per_job_title"  class="FL W11 F3 H4M LH3   bordBD1  bgcddc  color876 bord_select AC" data-t="check"' +
                    '             data-s="教授,副教授,高级讲师,讲师,特级教师,高级教师,一级教师,研究员,副研究员,教授级高工,高级工程师,工程师,主任医师,副主任医师,主治医师,主管护师,高级经济师,经济师,高级会计师,会计师">' + cont +
                    '        </div> ';
                break;
        }
        document.getElementById("re_page").innerHTML = "";
        var div = document.createElement("div");
        div.className = " W11 index99 fix bgc9 CH";
        div.innerHTML = '<div class="top0 H W11 AC ffHT bgc9 ">设置' + title +
            '    <div  class="FL B4M H4M F2" onclick="_wd.hide(re_page)"> 取消</div>' +
            '    <div  class="FR B4M H4M F2  colorff" id="n_release"> 完成</div>' +
            '</div><div class="bgc10 W11 F2 AL F3" id="up_list">' + inHtml +
            '</div>';
        document.getElementById("re_page").appendChild(div);
        _wd.show("re_page");
        _wit.event.div_UI("s_select");
        var update = document.getElementById("n_release");
        update.onclick = function () {
            var d = document.querySelector("#up_list>input");
            if (d){
                console.log(d.value);
                console.log(d.id);
            }else {
                var t = document.querySelector("#up_list>div");
                console.log(t);
                console.log(t.id);
            }

        };
    }

    // function C_mydetails(c) {
    //     document.getElementById("myAllClass").innerHTML = "";
    //     c.forEach(function (v) {
    //         var div = document.createElement("p");
    //         div.className = " AL W11 H4M  bordBD1 FL";
    //         div.innerHTML = '<div class="FL LH25">' + v.unit_name + " " + v.dept + " " + _wd.getCut("-", 0, v.date_end || "") + "届" + " " + _wd.getCut("||", 1, v.class_name) + "班" + '</div>' +
    //             '<div class="B3M H3M FR" onclick="del_school(' + v.id + ')" ><img class="B3M H3M P05M" src="../images/icon/delete.png" alt=""></div>  ';
    //
    //         document.getElementById("myAllClass").appendChild(div);
    //     });
    // }

    function init(msg) {
        console.log(msg);
        if (msg.result >= 0) {
            var info = msg.message;
            _userguid = info.user_guid;
            _token = info.token;
            _wit.event.input_UI("s_select", function (i, v, d) {
                console.log(i, v, d);
            });
            _wit.event.input_limit();

        } else {
            _wd.info("用户非法，请重新登录！", "bgc24");
            // _fun.toAlert("用户非法，请重新登录！");
        }
    }

    // function del_school(id) {
    //     console.log(id);
    //     _wit.postmessage({
    //         functionname: "deleteexp",
    //         witparams: JSON.stringify({
    //             type: 0,
    //             id: id
    //         }),
    //         callbackparam: JSON.stringify({
    //             type: 0,
    //             id: id
    //         }),
    //         callback: "delExp"
    //     });
    // }
    //
    // function delExp(msg, param) {
    //     console.log("正在删除");
    //     console.log(msg);
    //     var j = msg,
    //         p = JSON.parse(param);
    //     if (j && j.result >= 0) {
    //         _wd.info("删除成功！", "bgc5e");
    //         _wit.postmessage({functionname: "getuser", callback: "callback"});
    //         // document.location.reload(); //当前页面
    //         //其他端免回调
    //     } else {//pc端
    //         var o = p.json;
    //         console.log(o);
    //         console.log(p.type);
    //         p.type === 0 && externalfun.deleteexp(function (msg) {
    //             console.log(msg);
    //             _fun.toLoading(-1);
    //             var j = JSON.parse(msg);
    //             if (j.result >= 0) {
    //                 _wd.info("删除成功！", "bgc5e");
    //                 // document.location.reload(); //当前页面
    //                 _wit.postmessage({functionname: "getuser", callback: "callback"});
    //             }
    //         }, p.id, 0);
    //     }
    // }
</script>
